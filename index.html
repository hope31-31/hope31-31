<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Chat</title>
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#1e1e2f,#2c2c54);
  color:white;
  display:flex;
  flex-direction:column;
  height:100vh;
}
header {
  padding:15px;
  text-align:center;
  font-size:18px;
  font-weight:bold;
  background:rgba(0,0,0,0.3);
}
#chat {
  flex:1;
  overflow-y:auto;
  padding:10px;
}
.message {
  max-width:70%;
  margin:5px;
  padding:10px;
  border-radius:15px;
}
.mine {
  background:#4f46e5;
  align-self:flex-end;
}
.other {
  background:#2d2d44;
  align-self:flex-start;
}
#inputArea {
  display:flex;
  gap:5px;
  padding:10px;
  width:100%;
  background:rgba(0,0,0,0.3);
}
#messageInput {
  flex:1;
  padding:10px;
  border-radius:15px;
  border:none;
  outline:none;
}
button {
  padding:10px 15px;
  border:none;
  border-radius:12px;
  background:#6366f1;
  color:white;
  cursor:pointer;
}
</style>
</head>
<body>

<header>Simple Chat</header>

<div id="chat"></div>
<div id="inputArea">
  <input id="messageInput" placeholder="Type a message..." />
  <button onclick="sendMessage()">Send</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

// Firebase config â€“ replace with your own
const firebaseConfig = {
  apiKey: "PASTE_YOURS",
  authDomain: "PASTE_YOURS",
  projectId: "PASTE_YOURS",
  storageBucket: "PASTE_YOURS",
  messagingSenderId: "PASTE_YOURS",
  appId: "PASTE_YOURS"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

await signInAnonymously(auth);

const chatDiv = document.getElementById("chat");
const messageInput = document.getElementById("messageInput");
const messagesRef = collection(db,"messages");

async function sendMessage(){
  const text = messageInput.value.trim();
  if(!text) return;
  await addDoc(messagesRef,{
    text,
    createdAt:serverTimestamp()
  });
  messageInput.value="";
}

const q = query(messagesRef, orderBy("createdAt"));
onSnapshot(q, snapshot=>{
  chatDiv.innerHTML="";
  snapshot.forEach(docSnap=>{
    const data = docSnap.data();
    const div = document.createElement("div");
    div.className = "message mine";
    div.textContent = data.text;
    chatDiv.appendChild(div);
  });
  chatDiv.scrollTop = chatDiv.scrollHeight;
});

messageInput.addEventListener("keypress", e=>{
  if(e.key==="Enter") sendMessage();
});
</script>

</body>
</html>